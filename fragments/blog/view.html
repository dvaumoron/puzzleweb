
<h2>
    {{.Post.Title}}
    [<a href="{{.BaseUrl}}">{{.Messages.CancelLinkLabel}}</a>]
</h2>

<div>
    <div>
        {{.Messages.PostAuthorLabel}} {{template "profileLink" .Post.Creator}}
    </div>
    <div>
        {{.Messages.PostDateLabel}} {{.Post.Date}}
    </div>
</div>

<div>
    {{.Post.Content}}
</div>

<div class="pagination">
    {{if .PreviousPageNumber}}
        <form action="{{.CurrentUrl}}" method="GET">
            <div class="hidden">
                <input type="text" name="pageNumber" value="{{.PreviousPageNumber}}"/>
            </div>
            <div><button type="submit">{{.Messages.PreviousPageLinkLabel}}</button></div>
        </form>
    {{end}}

    {{if .NextPageNumber}}
        <form action="{{.CurrentUrl}}" method="GET">
            <div class="hidden">
                <input type="text" name="pageNumber" value="{{.NextPageNumber}}"/>
            </div>
            <div><button type="submit">{{.Messages.NextPageLinkLabel}}</button></div>
        </form>
    {{end}}
</div>

{{$postId := .Post.PostId}}
{{if .AllowedToCreate}}
    <form id="commentForm" action="{{.BaseUrl}}comment/save/{{$postId}}" method="POST">
        <div><textarea id="commentField" name="comment" rows="20" cols="80">{{.Messages.LeaveCommentLabel}}</textarea></div>
        <div class="hidden">
            {{/* to allow JavaScript or WebAssembly to detect unmodified localized comment */}}
            <span id="unmodifiedComment">{{.Messages.LeaveCommentLabel}}</span>
            {{/* to allow JavaScript or WebAssembly to display a localized error message */}}
            <span id="errorEmptyCommentMessage">{{.Messages.EmptyComment}}</span>
        </div>
        <div><button type="button" id="commentButton">{{.Messages.CreateLinkLabel}}</button></div>
    </form>
{{end}}

{{with .CommentMsg}}
    <div class="error">{{.}}</div>
{{end}}

<ul>
    {{$baseUrl := .BaseUrl}}
    {{if .AllowedToDelete}}
        {{$deleteLinkLabel := .Messages.DeleteLinkLabel}}
        {{range .Comments}}
            <li>
                <ul>
                    <li>{{template "profilePictureLink" .Creator}}</li>
                    <li>{{.Date}}</li>
                    <li>{{.Text}}</li>
                    <li><a href="{{$baseUrl}}comment/delete/{{$postId}}/{{.Id}}">{{$deleteLinkLabel}}</a></li>
                </ul>
            </li>
        {{end}}
    {{else}}
        {{range .Comments}}
            <li>
                <ul>
                    <li>{{template "profilePictureLink" .Creator}}</li>
                    <li>{{.Date}}</li>
                    <li>{{.Text}}</li>
                </ul>
            </li>
        {{end}}
    {{end}}
</ul>
